package com.niit.collaborationPlatform.config;

public class ApplicationContextConfig {
	@Configuration
	@ComponentScan("com.niit")
	@EnableTransactionManagement
	public class ApplicationContextConfig {
		
		@Autowired
		@Bean(name="dataSource")
		public DriverManagerDataSource getDataSource()
		{
			DriverManagerDataSource dataSource=new DriverManagerDataSource();
			dataSource.setDriverClassName("org.h2.Driver");
			dataSource.setUrl("jdbc:h2:tcp://localhost/~/test");
			dataSource.setUsername("sa");
			dataSource.setPassword("sa");
			return dataSource;
		}	
		
		private Properties getHibernateProperties()
		
		{
			Properties properties=new Properties();
			properties.put("hibernate.show.sql", "true");
			properties.put("hibernate.dialect", "org.hibernate.dialect.H2Dialect");
			return properties;	
		}
		
		@Autowired
		@Bean(name="sessionfactory")
		public SessionFactory getSessionFactory(DataSource dataSource)
		{
			LocalSessionFactoryBuilder sessionBuilder =new LocalSessionFactoryBuilder(dataSource);
			sessionBuilder.addProperties(getHibernateProperties());
			sessionBuilder.addAnnotatedClass(User1.class);
			sessionBuilder.addAnnotatedClass(Supplier.class);
			sessionBuilder.addAnnotatedClass(Category.class);
			sessionBuilder.addAnnotatedClass(Product.class);
			sessionBuilder.addAnnotatedClass(Employee_Test.class);
			sessionBuilder.addAnnotatedClass(Order.class);
			sessionBuilder.addAnnotatedClass(OrderWebFlow.class);
			sessionBuilder.addAnnotatedClass(Cart.class);
			sessionBuilder.addAnnotatedClass(ShippingAddress.class);
			sessionBuilder.addAnnotatedClass(BillingAddress.class);
			
	        return sessionBuilder.buildSessionFactory();
			
		}
}
